<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>簡單實作 EJS</title>
    </head>
    <body>
        <form action="/process" method="POST" enctype="multipart/form-data">
            <input type="text" name="text" id="text">
            <input type="file" name="file" onchange="getBaseUrl();">
            <button type="submit">Submit</button>
        </form>
        <script>
            function getBaseUrl(){
                var file = document.querySelector('input[type=file]')['files'][0];
                var reader = new FileReader();
                var baseString;
                reader.onloadend = function(){
                    baseString = reader.result;
                    console.log(baseString); 
                };
                reader.readAsDataURL(file);
                return baseString;
            }
            
            var baseString = getBaseUrl();
            var text_data = document.getElementById('text')
            console.log(text_data)

        </script>
    </body>
</html>
